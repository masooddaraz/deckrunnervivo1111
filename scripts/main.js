"use strict";window.g_bjJ=class{constructor(e,g){this.g_aYq=e,this.g_bjK=g,this.g_bjL=!1,this.g_aXv=()=>this.g_atc()}g_bjM(){}g_bjN(e,g,n,_){this.g_aYq.g_bjO(this.g_bjK,e,g,n,_)}g_bjP(e,g,n,_){return this.g_aYq.g_bjQ(this.g_bjK,e,g,n,_)}g_bjR(e,g,n){this.g_aYq.g_bjS()?this.g_bjN(e,g,n):this.g_aYq.g_bjT()._OnMessageFromDOM({type:"event",component:this.g_bjK,handler:e,dispatchOpts:n||null,data:g,responseId:null})}g_bjU(e,g){this.g_aYq.g_bjV(this.g_bjK,e,g)}g_bjW(e){for(const[g,n]of e)this.g_bjU(g,n)}g_bjX(){return this.g_aYq}g_bjY(){return this.g_bjK}g_aMf(){this.g_bjL||(this.g_aYq.g_bjZ(this.g_aXv),this.g_bjL=!0)}g_aLS(){this.g_bjL&&(this.g_aYq.g_bj_(this.g_aXv),this.g_bjL=!1)}g_atc(){}},"use strict",window.g_bj$=class extends g_bjJ{constructor(e,g){super(e,g),this.g_bka=new Map,this.g_bkb=!0,this.g_bjU("create",e=>this.g_bkc(e)),this.g_bjU("destroy",e=>this.g_bkd(e)),this.g_bjU("set-visible",e=>this.g_bke(e)),this.g_bjU("update-position",e=>this.g_bkf(e)),this.g_bjU("update-state",e=>this.g_beu(e)),this.g_bjU("focus",e=>this.g_bkg(e)),this.g_bjU("set-css-style",e=>this.g_bkh(e))}g_bki(e){this.g_bkb=!!e}g_bkj(e,g){this.g_bjU(e,e=>{const n=e.elementId,_=this.g_bka.get(n);return g(_,e)})}g_bkc(e){const g=e.elementId,n=this.g_aMF(g,e);this.g_bka.set(g,n),e.isVisible||(n.style.display="none"),this.g_bkb&&document.body.appendChild(n)}g_aMF(){throw new Error("required override")}g_bkk(){}g_bkd(e){const g=e.elementId,n=this.g_bka.get(g);this.g_bkk(n),this.g_bkb&&n.parentElement.removeChild(n),this.g_bka.delete(g)}g_bkl(e,g,n){n||(n={}),n.elementId=g,this.g_bjN(e,n)}g_bkm(e,g,n){n||(n={}),n.elementId=g,this.g_bjR(e,n)}g_bke(e){if(this.g_bkb){const g=this.g_bka.get(e.elementId);g.style.display=e.isVisible?"":"none"}}g_bkf(e){if(this.g_bkb){const g=this.g_bka.get(e.elementId);g.style.left=e.left+"px",g.style.top=e.top+"px",g.style.width=e.width+"px",g.style.height=e.height+"px";const n=e.fontSize;null!==n&&(g.style.fontSize=n+"em")}}g_beu(e){const g=this.g_bka.get(e.elementId);this.g_bkn(g,e)}g_bkn(){throw new Error("required override")}g_bkg(e){const g=this.g_bka.get(e.elementId);e.focus?g.focus():g.blur()}g_bkh(e){const g=this.g_bka.get(e.elementId);g.style[e.prop]=e.val}g_bko(e){return this.g_bka.get(e)}},"use strict";{function n(e){return new Promise((g,n)=>{const _=document.createElement("script");_.onload=g,_.onerror=n,_.async=!1,_.src=e,document.head.appendChild(_)})}async function _(e){const g=await t(e),n=new TextDecoder("utf-8");return n.decode(g)}function t(e){return new Promise((g,n)=>{const _=new FileReader;_.onload=e=>g(e.target.result),_.onerror=e=>n(e),_.readAsArrayBuffer(e)})}const b=/(iphone|ipod|ipad)/i.test(navigator.userAgent);let o=new Audio;const r={"audio/webm; codecs=opus":!!o.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!o.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!o.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!o.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!o.canPlayType("audio/mp4"),"audio/mpeg":!!o.canPlayType("audio/mpeg")};o=null;const e=[];let g=0;window.RealFile=window.File;const p=[],i=new Map,s=new Map;let u=0;const l=[];self.g_bkp=function(e){if("function"!=typeof e)throw new Error("runOnStartup called without a function");l.push(e)},window.g_bkq=class o{constructor(e){this.g_bkr=e.g_bks,this.g_bkt=null,this.g_aWu="",this.g_bku=e.g_bkv,this.g_bkw={},this.g_bkx=null,this.g_bky=null,this.g_bkz=[],this.g_bkA=null,this.g_aUA=null,this.g_aYk=null,this.g_aVh=-1,this.g_bkB=()=>this.g_bkC(),this.g_bkD=[],this.g_aWz=e.g_fE,("cordova"===this.g_aWz||"playable-ad"===this.g_aWz||"instant-games"===this.g_aWz)&&this.g_bkr&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in WebViews due to crbug.com/923007. Reverting to DOM mode."),this.g_bkr=!1),/CrOS/.test(navigator.userAgent)&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in Chrome OS due to reports of crashes. Reverting to DOM mode."),this.g_bkr=!1),this.g_bkE=!1,this.g_bkF=null,("html5"===this.g_aWz||"playable-ad"===this.g_aWz)&&"file"===location.protocol.substr(0,4)&&alert("Exported games won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)"),this.g_bjV("runtime","cordova-fetch-local-file",e=>this.g_bkG(e)),this.g_bjV("runtime","create-job-worker",e=>this.g_bkH(e)),"cordova"===this.g_aWz?document.addEventListener("deviceready",()=>this.g_aKV(e)):this.g_aKV(e)}g_RM(){this.g_bkI(),this.g_bkt&&(this.g_bkt.onmessage=null,this.g_bkt=null),this.g_bkx&&(this.g_bkx.terminate(),this.g_bkx=null),this.g_bky&&(this.g_bky.g_RM(),this.g_bky=null),this.g_aUA&&(this.g_aUA.parentElement.removeChild(this.g_aUA),this.g_aUA=null)}g_bkJ(){return this.g_aUA}g_Sp(){return this.g_aWu}g_bjS(){return this.g_bkr}g_aZN(){return this.g_aWz}g_aYI(){return"cordova"===this.g_aWz&&b}g_bkK(){return"cordova"===this.g_aWz&&!1===b}async g_aKV(e){if("playable-ad"===this.g_aWz){this.g_bkF=self.c3_base64files,await this.g_bkL();for(let g=0,n=e.g_bkM.length;g<n;++g){const n=e.g_bkM[g].toLowerCase();this.g_bkF.hasOwnProperty(n)&&(e.g_bkM[g]=URL.createObjectURL(this.g_bkF[n]))}}if(e.g_bkN)this.g_aWu=e.g_bkN;else{const e=location.origin;this.g_aWu=("null"===e?"file:///":e)+location.pathname;const g=this.g_aWu.lastIndexOf("/");-1!==g&&(this.g_aWu=this.g_aWu.substr(0,g+1))}if(e.g_bkO)for(const[g,n]of Object.entries(e.g_bkO))this.g_bkw[g]=URL.createObjectURL(n);const g=new MessageChannel;this.g_bkt=g.port1,this.g_bkt.onmessage=e=>this._OnMessageFromRuntime(e.data),window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(e=>this.g_bkP(e)),this.g_aYk=new self.g_bkQ(this),await this.g_aYk.g_aRM(),this.g_bkR(),"object"==typeof window.StatusBar&&window.StatusBar.hide(),"object"==typeof window.AndroidFullScreen&&window.AndroidFullScreen.immersiveMode(),await this.g_bkS(),this.g_bkr?await this.g_bkT(e,g.port2):await this.g_bkU(e,g.port2)}g_bkV(e){return this.g_bkw.hasOwnProperty(e)?this.g_bkw[e]:e.endsWith("/workermain.js")&&this.g_bkw.hasOwnProperty("workermain.js")?this.g_bkw["workermain.js"]:"playable-ad"===this.g_aWz&&this.g_bkF.hasOwnProperty(e.toLowerCase())?URL.createObjectURL(this.g_bkF[e.toLowerCase()]):e}async g_bkW(g,n,_){if(g.startsWith("blob:"))return new Worker(g,_);if(this.g_aYI()){const e=await this.g_akK(this.g_bku+g),n=new Blob([e],{type:"application/javascript"});return new Worker(URL.createObjectURL(n),_)}const t=new URL(g,n),b=location.origin!==t.origin;if(b){const e=await fetch(t);if(!e.ok)throw new Error("failed to fetch worker script");const g=await e.blob();return new Worker(URL.createObjectURL(g),_)}return new Worker(t,_)}g_bkR(){if(this.g_aYI()){const g=document.documentElement.style,n=document.body.style,_=window.innerWidth<window.innerHeight,t=_?window.screen.width:window.screen.height,b=_?window.screen.height:window.screen.width;n.height=g.height=b+"px",n.width=g.width=t+"px"}}g_bkX(e){return{baseUrl:this.g_aWu,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,isFullscreen:o.g_aVI(),projectData:e.g_bkY,previewImageBlobs:window.cr_previewImageBlobs||this.g_bkF,previewProjectFileBlobs:window.cr_previewProjectFileBlobs,exportType:e.g_fE,isDebug:-1<self.location.search.indexOf("debug"),ife:!!self.g_bkZ,jobScheduler:this.g_aYk.g_bk_(),supportedAudioFormats:r,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.g_bku+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.g_bku+"opus.wasm.wasm",isWKWebView:this.g_aYI(),isFBInstantAvailable:"undefined"!=typeof self.FBInstant}}async g_bkT(e,g){const n=this.g_bkV(e.g_bk$);this.g_bkx=await this.g_bkW(n,this.g_aWu,{name:"Runtime"}),this.g_aUA=document.createElement("canvas"),this.g_aUA.style.display="none";const _=this.g_aUA.transferControlToOffscreen();document.body.appendChild(this.g_aUA),window.c3canvas=this.g_aUA,this.g_bkx.postMessage(Object.assign(this.g_bkX(e),{type:"init-runtime",isInWorker:!0,messagePort:g,canvas:_,workerDependencyScripts:e.g_bla||[],engineScripts:e.g_bkM,projectScripts:window.g_blb,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[g,_,...this.g_aYk.g_blc()]),this.g_bkz=p.map(e=>new e(this)),this.g_bld(),self.c3_callFunction=(e,g)=>this.g_bkA.g_aCM(e,g),"preview"===this.g_aWz&&(self.goToLastErrorScript=()=>this.g_bjO("runtime","go-to-last-error-script"))}async g_bkU(g,_){this.g_aUA=document.createElement("canvas"),this.g_aUA.style.display="none",document.body.appendChild(this.g_aUA),window.c3canvas=this.g_aUA,this.g_bkz=p.map(e=>new e(this)),this.g_bld();const t=g.g_bkM.map(e=>new URL(e,this.g_aWu).toString());if(Array.isArray(g.g_bla)&&t.unshift(...g.g_bla),await Promise.all(t.map(e=>n(e))),g.g_ble&&0<g.g_ble.length){const e=self.C3_ProjectScriptsStatus;try{if(await Promise.all(g.g_ble.map(e=>n(e[1]))),Object.values(e).some(e=>!e))return void self.setTimeout(()=>this.g_blf(e),100)}catch(g){return console.error("[Preview] Error loading project scripts: ",g),void self.setTimeout(()=>this.g_blf(e),100)}}if("preview"===this.g_aWz&&"object"!=typeof self.g_Ov.g_bjI)return console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),void alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.");const b=Object.assign(this.g_bkX(g),{isInWorker:!1,messagePort:_,canvas:this.g_aUA,runOnStartupFunctions:l});this.g_bky=self.C3_CreateRuntime(b),await self.C3_InitRuntime(this.g_bky,b)}g_blf(e){const g=Object.entries(e).filter(e=>!e[1]).map(e=>e[0]),n=`Failed to load project script '${g[0]}'. Check all your JavaScript code has valid syntax.`;console.error("[Preview] "+n),alert(n)}async g_bkH(){const e=await this.g_aYk.g_blg();return{outputPort:e,transferables:[e]}}g_bjT(){if(this.g_bkr)throw new Error("not available in worker mode");return this.g_bky}g_bjO(g,n,_,t,b){this.g_bkt.postMessage({type:"event",component:g,handler:n,dispatchOpts:t||null,data:_,responseId:null},this.g_bkE?void 0:b)}g_bjQ(n,_,t,b,o){const e=u++,a=new Promise((g,n)=>{s.set(e,{resolve:g,reject:n})});return this.g_bkt.postMessage({type:"event",component:n,handler:_,dispatchOpts:b||null,data:t,responseId:e},this.g_bkE?void 0:o),a}["_OnMessageFromRuntime"](e){const g=e.type;if("event"===g)this.g_blh(e);else if("result"===g)this.g_bli(e);else if("runtime-ready"===g)this.g_blj();else if("alert"===g)alert(e.message);else throw new Error(`unknown message '${g}'`)}g_blh(n){const _=n.component,t=n.handler,b=n.data,o=n.responseId,e=i.get(_);if(!e)return void console.warn(`[DOM] No event handlers for component '${_}'`);const a=e.get(t);if(!a)return void console.warn(`[DOM] No handler '${t}' for component '${_}'`);let g=null;try{g=a(b)}catch(e){return console.error(`Exception in '${_}' handler '${t}':`,e),void(null!==o&&this.g_blk(o,!1,e.toString()))}null!==o&&(g&&g.then?g.then(e=>this.g_blk(o,!0,e)).catch(e=>{console.error(`Rejection from '${_}' handler '${t}':`,e),this.g_blk(o,!1,e.toString())}):this.g_blk(o,!0,g))}g_blk(e,g,n){let _;n&&n.transferables&&(_=n.transferables),this.g_bkt.postMessage({type:"result",responseId:e,isOk:g,result:n},_)}g_bli(g){const n=g.responseId,_=g.isOk,t=g.result,b=s.get(n);_?b.resolve(t):b.reject(t),s.delete(n)}g_bjV(e,g,n){let _=i.get(e);if(_||(_=new Map,i.set(e,_)),_.has(g))throw new Error(`[DOM] Component '${e}' already has handler '${g}'`);_.set(g,n)}static g_bll(e){if(p.includes(e))throw new Error("DOM handler already added");p.push(e)}g_bld(){for(const e of this.g_bkz)if("runtime"===e.g_bjY())return void(this.g_bkA=e);throw new Error("cannot find runtime DOM handler")}g_bkP(e){this.g_bjO("debugger","message",e)}g_blj(){for(const e of this.g_bkz)e.g_bjM()}static g_aVI(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}async g_blm(){return await this.g_bjQ("runtime","get-remote-preview-status-info")}g_bjZ(e){this.g_bkD.push(e),this.g_bln()}g_bj_(e){const g=this.g_bkD.indexOf(e);if(-1===g)throw new Error("invalid callback");this.g_bkD.splice(g,1),this.g_bkD.length||this.g_bkI()}g_bln(){-1===this.g_aVh&&this.g_bkD.length&&(this.g_aVh=requestAnimationFrame(this.g_bkB))}g_bkI(){-1!==this.g_aVh&&(cancelAnimationFrame(this.g_aVh),this.g_aVh=-1)}g_bkC(){this.g_aVh=-1;for(const e of this.g_bkD)e();this.g_bln()}g_blo(e){this.g_bkA.g_blo(e)}g_blp(e){this.g_bkA.g_blp(e)}g_blq(){this.g_bkA.g_blq()}g_EB(e){this.g_bkA.g_EB(e)}g_ald(e){return!!r[e]}async g_aNU(e){const g=await this.g_bjQ("runtime","opus-decode",{arrayBuffer:e},null,[e]);return new Float32Array(g)}g_SU(e){return /^(?:[a-z]+:)?\/\//.test(e)||"data:"===e.substr(0,5)||"blob:"===e.substr(0,5)}g_SV(e){return!this.g_SU(e)}async g_bkG(e){const g=e.filename;switch(e.as){case"text":return await this.g_akL(g);case"buffer":return await this.g_akK(g);default:throw new Error("unsupported type");}}g_blr(e){const g=window.cordova.file.applicationDirectory+"www/"+e.toLowerCase();return new Promise((e,n)=>{window.resolveLocalFileSystemURL(g,g=>{g.file(e,n)},n)})}async g_akL(e){const g=await this.g_blr(e);return await _(g)}g_bls(){if(e.length&&!(8<=g)){g++;const n=e.shift();this.g_blt(n.filename,n.g_pd,n.g_pe)}}g_akK(n){return new Promise((_,t)=>{e.push({filename:n,g_pd:e=>{g--,this.g_bls(),_(e)},g_pe:e=>{g--,this.g_bls(),t(e)}}),this.g_bls()})}async g_blt(g,n,e){try{const _=await this.g_blr(g),b=await t(_);n(b)}catch(g){e(g)}}async g_bkL(){const e=[];for(const[g,n]of Object.entries(this.g_bkF))e.push(this.g_blu(g,n));await Promise.all(e)}async g_blu(e,g){if("object"==typeof g)this.g_bkF[e]=new Blob([g.str],{type:g.type});else{const n=await fetch(g),_=await n.blob();this.g_bkF[e]=_}}g_bkS(){let e=null;const g=new Promise(g=>e=g),n=new ArrayBuffer(1),_=new MessageChannel;return _.port2.onmessage=g=>{g.data&&g.data.arrayBuffer||(this.g_bkE=!0,console.warn("MessageChannel transfers determined to be broken. Disabling transferables.")),e()},_.port1.postMessage({arrayBuffer:n},[n]),g}}}{function _(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||e.originalEvent&&e.originalEvent.sourceCapabilities&&e.originalEvent.sourceCapabilities.firesTouchEvents}function t(e){return new Promise((g,n)=>{const _=document.createElement("link");_.onload=()=>g(_),_.onerror=e=>n(e),_.rel="stylesheet",_.href=e,document.head.appendChild(_)})}function a(e){return new Promise((g,n)=>{const _=new Image;_.onload=()=>g(_),_.onerror=e=>n(e),_.src=e})}async function r(e){const g=URL.createObjectURL(e);try{return await a(g)}finally{URL.revokeObjectURL(g)}}function p(e){do{if(e.parentNode&&e.hasAttribute("contenteditable"))return!0;e=e.parentNode}while(e);return!1}function s(e){const g=e.target.tagName.toLowerCase();l.has(g)&&e.preventDefault()}function e(e){(e.metaKey||e.ctrlKey)&&e.preventDefault()}function g(){try{return window.parent&&window.parent.document.hasFocus()}catch(e){return!1}}const d=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),i={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},u={dispatchUserScriptEvent:!0},c={dispatchRuntimeEvent:!0},l=new Set(["canvas","body","html"]);self.C3_RasterSvgImage=async function(g,n,_){const t=document.createElement("canvas");t.width=n,t.height=_;const b=t.getContext("2d");return b.drawImage(g,0,0,n,_),t};let b=!1;document.addEventListener("pause",()=>b=!0),document.addEventListener("resume",()=>b=!1);const n=class extends g_bjJ{constructor(g){super(g,"runtime"),this.g_blv=!0,this.g_blw=-1,this.g_blx="any",this.g_bly=!1,this.g_blz=!1,this.g_blA=null,g.g_bjV("canvas","update-size",e=>this.g_blB(e)),g.g_bjV("runtime","invoke-download",e=>this.g_blC(e)),g.g_bjV("runtime","raster-svg-image",e=>this.g_blD(e)),g.g_bjV("runtime","set-target-orientation",e=>this.g_blE(e)),g.g_bjV("runtime","register-sw",()=>this.g_blF()),g.g_bjV("runtime","post-to-debugger",e=>this.g_blG(e)),g.g_bjV("runtime","go-to-script",e=>this.g_blG(e)),g.g_bjV("runtime","before-start-ticking",()=>this.g_blH()),g.g_bjV("runtime","debug-highlight",e=>this.g_blI(e)),g.g_bjV("runtime","enable-device-orientation",()=>this.g_blJ()),g.g_bjV("runtime","enable-device-motion",()=>this.g_blK()),g.g_bjV("runtime","add-stylesheet",e=>this.g_blL(e));const n=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",e=>{const g=e.target,_=g.tagName.toLowerCase();n.has(_)||p(g)||e.preventDefault()}),window.addEventListener("selectstart",s),window.addEventListener("gesturehold",s),window.addEventListener("touchstart",s,{passive:!1});const _=g.g_bkJ();"undefined"==typeof PointerEvent?_.addEventListener("touchstart",s):(window.addEventListener("pointerdown",s,{passive:!1}),_.addEventListener("pointerdown",s)),this.g_blM=0,window.addEventListener("mousedown",e=>{1===e.button&&e.preventDefault()}),window.addEventListener("mousewheel",e,{passive:!1}),window.addEventListener("wheel",e,{passive:!1}),window.addEventListener("resize",()=>this.g_aVv()),this.g_blN=new Set,this.g_blO=new WeakSet,this.g_bem=!1}g_blH(){return"cordova"===this.g_aYq.g_aZN()?(document.addEventListener("pause",()=>this.g_aYm(!0)),document.addEventListener("resume",()=>this.g_aYm(!1))):document.addEventListener("visibilitychange",()=>this.g_aYm(document.hidden)),{isSuspended:!!(document.hidden||b)}}g_bjM(){window.addEventListener("focus",()=>this.g_blP("window-focus")),window.addEventListener("blur",()=>{this.g_blP("window-blur",{parentHasFocus:g()}),this.g_blM=0}),window.addEventListener("fullscreenchange",()=>this.g_aVw()),window.addEventListener("webkitfullscreenchange",()=>this.g_aVw()),window.addEventListener("mozfullscreenchange",()=>this.g_aVw()),window.addEventListener("fullscreenerror",e=>this.g_aVx(e)),window.addEventListener("webkitfullscreenerror",e=>this.g_aVx(e)),window.addEventListener("mozfullscreenerror",e=>this.g_aVx(e)),window.addEventListener("keydown",e=>this.g_blQ("keydown",e)),window.addEventListener("keyup",e=>this.g_blQ("keyup",e)),window.addEventListener("dblclick",e=>this.g_blR("dblclick",e,i)),window.addEventListener("wheel",e=>this.g_blS("wheel",e)),"undefined"==typeof PointerEvent?(window.addEventListener("mousedown",e=>this.g_blT("pointerdown",e)),window.addEventListener("mousemove",e=>this.g_blT("pointermove",e)),window.addEventListener("mouseup",e=>this.g_blT("pointerup",e)),window.addEventListener("touchstart",e=>this.g_blU("pointerdown",e)),window.addEventListener("touchmove",e=>this.g_blU("pointermove",e)),window.addEventListener("touchend",e=>this.g_blU("pointerup",e)),window.addEventListener("touchcancel",e=>this.g_blU("pointercancel",e))):(window.addEventListener("pointerdown",e=>this.g_blV("pointerdown",e)),window.addEventListener("pointermove",e=>this.g_blV("pointermove",e)),window.addEventListener("pointerup",e=>this.g_blV("pointerup",e)),window.addEventListener("pointercancel",e=>this.g_blV("pointercancel",e)));const e=()=>this.g_blq();window.addEventListener("pointerup",e,!0),window.addEventListener("touchend",e,!0),window.addEventListener("click",e,!0),window.addEventListener("keydown",e,!0),window.addEventListener("gamepadconnected",e,!0)}g_blP(e,g){this.g_bjN(e,g||null,c)}g_blW(){return Math.max(window.innerWidth,1)}g_blX(){return Math.max(window.innerHeight,1)}g_aVv(){const e=this.g_blW(),g=this.g_blX();this.g_blP("window-resize",{innerWidth:e,innerHeight:g,devicePixelRatio:window.devicePixelRatio}),this.g_aYq.g_aYI()&&(-1!==this.g_blw&&clearTimeout(this.g_blw),this.g_blY(e,g,0))}g_blZ(e,g,n){-1!==this.g_blw&&clearTimeout(this.g_blw),this.g_blw=setTimeout(()=>this.g_blY(e,g,n),48)}g_blY(g,n,_){const t=this.g_blW(),b=this.g_blX();this.g_blw=-1,t!=g||b!=n?this.g_blP("window-resize",{innerWidth:t,innerHeight:b,devicePixelRatio:window.devicePixelRatio}):10>_&&this.g_blZ(t,b,_+1)}g_blE(e){this.g_blx=e.targetOrientation}g_bl_(){const e=this.g_blx;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(e).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let g=!1;screen.lockOrientation?g=screen.lockOrientation(e):screen.webkitLockOrientation?g=screen.webkitLockOrientation(e):screen.mozLockOrientation?g=screen.mozLockOrientation(e):screen.msLockOrientation&&(g=screen.msLockOrientation(e)),g||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",e)}}g_aVw(){const e=g_bkq.g_aVI();e&&"any"!==this.g_blx&&this.g_bl_(),this.g_bjN("fullscreenchange",{isFullscreen:e,innerWidth:this.g_blW(),innerHeight:this.g_blX()})}g_aVx(e){console.warn("[Construct 3] Fullscreen request failed: ",e),this.g_bjN("fullscreenerror",{isFullscreen:g_bkq.g_aVI(),innerWidth:this.g_blW(),innerHeight:this.g_blX()})}g_aYm(e){e?this.g_aYq.g_bkI():this.g_aYq.g_bln(),this.g_bjN("visibilitychange",{hidden:e})}g_blQ(e,g){const n=d.get(g.code)||g.code;this.g_bjR(e,{code:n,key:g.key,which:g.which,repeat:g.repeat,altKey:g.altKey,ctrlKey:g.ctrlKey,metaKey:g.metaKey,shiftKey:g.shiftKey,timeStamp:g.timeStamp},i)}g_blS(e,g){this.g_bjN(e,{clientX:g.clientX,clientY:g.clientY,deltaX:g.deltaX,deltaY:g.deltaY,deltaZ:g.deltaZ,deltaMode:g.deltaMode,timeStamp:g.timeStamp},i)}g_blR(e,g,n){_(g)||("mousedown"===e&&window!==window.top&&window.focus(),this.g_bjR(e,{button:g.button,buttons:g.buttons,clientX:g.clientX,clientY:g.clientY,timeStamp:g.timeStamp},n))}g_blT(e,g){if(!_(g)){"pointerdown"===e&&window!==window.top&&window.focus();const n=this.g_blM;"pointerdown"===e&&0!==n?e="pointermove":"pointerup"==e&&0!==g.buttons&&(e="pointermove"),this.g_bjR(e,{pointerId:1,pointerType:"mouse",button:g.button,buttons:g.buttons,lastButtons:n,clientX:g.clientX,clientY:g.clientY,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:g.timeStamp},i),this.g_blM=g.buttons,this.g_blR(g.type,g,u)}}g_blV(e,g){"pointerdown"===e&&window!==window.top&&window.focus();let n=0;if("mouse"===g.pointerType&&(n=this.g_blM),this.g_bjR(e,{pointerId:g.pointerId,pointerType:g.pointerType,button:g.button,buttons:g.buttons,lastButtons:n,clientX:g.clientX,clientY:g.clientY,width:g.width||0,height:g.height||0,pressure:g.pressure||0,tangentialPressure:g.tangentialPressure||0,tiltX:g.tiltX||0,tiltY:g.tiltY||0,twist:g.twist||0,timeStamp:g.timeStamp},i),"mouse"===g.pointerType){let n="mousemove";"pointerdown"===e?n="mousedown":"pointerup"==e&&(n="pointerup"),this.g_blR(n,g,u),this.g_blM=g.buttons}}g_blU(e,g){"pointerdown"===e&&window!==window.top&&window.focus();for(let n=0,_=g.changedTouches.length;n<_;++n){const _=g.changedTouches[n];this.g_bjR(e,{pointerId:_.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:_.clientX,clientY:_.clientY,width:2*(_.radiusX||_.webkitRadiusX||0),height:2*(_.radiusY||_.webkitRadiusY||0),pressure:_.force||_.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,twist:_.rotationAngle||0,timeStamp:g.timeStamp},i)}}g_blJ(){this.g_bly||(this.g_bly=!0,window.addEventListener("deviceorientation",e=>this.g_baU(e)))}g_blK(){this.g_blz||(this.g_blz=!0,window.addEventListener("devicemotion",e=>this.g_baV(e)))}g_baU(e){this.g_bjN("deviceorientation",{alpha:e.alpha||0,beta:e.beta||0,gamma:e.gamma||0,timeStamp:e.timeStamp},i)}g_baV(n){let _=null;const t=n.acceleration;t&&(_={x:t.x||0,y:t.y||0,z:t.z||0});let o=null;const a=n.accelerationIncludingGravity;a&&(o={x:a.x||0,y:a.y||0,z:a.z||0});let e=null;const r=n.rotationRate;r&&(e={alpha:r.alpha||0,beta:r.beta||0,gamma:r.gamma||0}),this.g_bjN("devicemotion",{acceleration:_,accelerationIncludingGravity:o,rotationRate:e,interval:n.interval,timeStamp:n.timeStamp},i)}g_blB(e){const g=this.g_bjX(),n=g.g_bkJ();n.style.width=e.styleWidth+"px",n.style.height=e.styleHeight+"px",n.style.marginLeft=e.marginLeft+"px",n.style.marginTop=e.marginTop+"px",g.g_bkR(),this.g_blv&&(n.style.display="",this.g_blv=!1)}g_blC(g){const n=g.url,_=g.filename,t=document.createElement("a"),e=document.body;t.textContent=_,t.href=n,t.download=_,e.appendChild(t),t.click(),e.removeChild(t)}async g_blD(n){const _=n.blob,t=n.width,b=n.height,e=await r(_),o=await self.C3_RasterSvgImage(e,t,b);return await createImageBitmap(o)}async g_blL(e){await t(e.url)}g_blq(){const e=[...this.g_blN];if(this.g_blN.clear(),!this.g_bem)for(const g of e){const e=g.play();e&&e.catch(()=>{this.g_blO.has(g)||this.g_blN.add(g)})}}g_blo(e){if("function"!=typeof e.play)throw new Error("missing play function");this.g_blO.delete(e);let g;try{g=e.play()}catch(g){return void this.g_blN.add(e)}g&&g.catch(()=>{this.g_blO.has(e)||this.g_blN.add(e)})}g_blp(e){this.g_blN.delete(e),this.g_blO.add(e)}g_EB(e){this.g_bem=!!e}g_blI(e){const g=e.show;if(!g)return void(this.g_blA&&(this.g_blA.style.display="none"));this.g_blA||(this.g_blA=document.createElement("div"),this.g_blA.id="inspectOutline",document.body.appendChild(this.g_blA));const n=this.g_blA;n.style.display="",n.style.left=e.left-1+"px",n.style.top=e.top-1+"px",n.style.width=e.width+2+"px",n.style.height=e.height+2+"px",n.textContent=e.name}g_blF(){window.C3_RegisterSW&&window.C3_RegisterSW()}g_blG(e){window.c3_postToMessagePort&&(e.from="runtime",window.c3_postToMessagePort(e))}g_aCM(e,g){return this.g_bjP("js-invoke-function",{name:e,params:g})}};g_bkq.g_bll(n)}{const e=document.currentScript.src;self.g_bkQ=class{constructor(g){this.g_bl$=g,this.g_aWu=e?e.substr(0,e.lastIndexOf("/")+1):g.g_Sp(),this.g_a_o=Math.min(navigator.hardwareConcurrency||2,16),this.g_bma=null,this.g_bmb=[],this.g_a_m=null,this.g_bmc=null}async g_aRM(){if(this.g_bmd)throw new Error("already initialised");this.g_bmd=!0;const e=this.g_bl$.g_bkV("dispatchworker.js");this.g_bma=await this.g_bl$.g_bkW(e,this.g_aWu,{name:"DispatchWorker"});const g=new MessageChannel;this.g_a_m=g.port1,this.g_bma.postMessage({type:"_init","in-port":g.port2},[g.port2]),this.g_bmc=await this.g_blg()}async g_blg(){const g=this.g_bmb.length,n=this.g_bl$.g_bkV("jobworker.js"),_=await this.g_bl$.g_bkW(n,this.g_aWu,{name:"JobWorker"+g}),t=new MessageChannel,b=new MessageChannel;return this.g_bma.postMessage({type:"_addJobWorker",port:t.port1},[t.port1]),_.postMessage({type:"init",number:g,"dispatch-port":t.port2,"output-port":b.port2},[t.port2,b.port2]),this.g_bmb.push(_),b.port1}g_bk_(){return{inputPort:this.g_a_m,outputPort:this.g_bmc,maxNumWorkers:this.g_a_o}}g_blc(){return[this.g_a_m,this.g_bmc]}}}if("use strict",window.C3_IsSupported){const e="undefined"!=typeof OffscreenCanvas;window.c3_runtimeInterface=new g_bkq({g_bks:e,g_bk$:"workermain.js",g_bkM:["scripts/c3runtime.js"],g_bkv:"scripts/",g_bla:[],g_fE:"html5"})}{const e=class extends g_bjJ{constructor(e){super(e,"touch"),this.g_bjU("request-permission",e=>this.g_bme(e))}async g_bme(e){const g=e.type;let n=!0;0===g?n=await this.g_bmf():1===g&&(n=await this.g_bmg()),this.g_bjN("permission-result",{type:g,result:n})}async g_bmf(){if(!self.DeviceOrientationEvent||!self.DeviceOrientationEvent.requestPermission)return!0;try{const e=await self.DeviceOrientationEvent.requestPermission();return"granted"===e}catch(e){return console.warn("[Touch] Failed to request orientation permission: ",e),!1}}async g_bmg(){if(!self.DeviceMotionEvent||!self.DeviceMotionEvent.requestPermission)return!0;try{const e=await self.DeviceMotionEvent.requestPermission();return"granted"===e}catch(e){return console.warn("[Touch] Failed to request motion permission: ",e),!1}}};g_bkq.g_bll(e)}{function g(e){e.stopPropagation()}function n(e){13!==e.which&&27!==e.which&&e.stopPropagation()}const e=class extends g_bj${constructor(e){super(e,"text-input"),this.g_bkj("scroll-to-bottom",e=>this.g_bmh(e))}g_aMF(_,t){let b;const o=t.type;return"textarea"===o?(b=document.createElement("textarea"),b.style.resize="none"):(b=document.createElement("input"),b.type=o),b.style.position="absolute",b.autocomplete="off",b.addEventListener("touchstart",g),b.addEventListener("touchmove",g),b.addEventListener("touchend",g),b.addEventListener("mousedown",g),b.addEventListener("mouseup",g),b.addEventListener("keydown",n),b.addEventListener("keyup",n),b.addEventListener("click",e=>{e.stopPropagation(),this.g_bkm("click",_)}),b.addEventListener("dblclick",e=>{e.stopPropagation(),this.g_bkm("dblclick",_)}),b.addEventListener("input",()=>this.g_bkl("change",_,{text:b.value})),b.id=t.id,this.g_bkn(b,t),b}g_bkn(e,g){e.value=g.text,e.placeholder=g.placeholder,e.title=g.title,e.disabled=!g.isEnabled,e.readOnly=g.isReadOnly,e.spellcheck=g.spellCheck}g_bmh(e){e.scrollTop=e.scrollHeight}};g_bkq.g_bll(e)}{function e(e,g){return e.length===g.length&&(e===g||e.toLowerCase()===g.toLowerCase())}const g=class extends g_bjJ{constructor(e){super(e,"audio"),this.g_bmi=null,this.g_bmj=null,this.g_bmk=!1,this.g_bml=()=>this.g_bmm(),this.g_bmn=[],this.g_bmo=[],this.g_bmp=null,this.g_bmq="",this.g_bmr=-1,this.g_bms=new Map,this.g_bel=1,this.g_bem=!1,this.g_bd_=0,this.g_aRI=1,this.g_aXL=0,this.g_beb="HRTF",this.g_bec="inverse",this.g_bmt=600,this.g_beh=1e4,this.g_bei=1,this.g_bmu=!1,this.g_bmv=!1,this.g_bmw=this.g_aYq.g_ald("audio/webm; codecs=opus"),this.g_bmx=new Map,this.g_bmy=new Set,this.g_bmz=!1,this.g_bmA="",this.g_bmB=null,self.C3Audio_OnMicrophoneStream=(e,g)=>this.g_bmC(e,g),this.g_bmD=null,self.C3Audio_GetOutputStream=()=>this.g_bmE(),this.g_bjW([["create-audio-context",e=>this.g_bmF(e)],["play",e=>this.g_bmG(e)],["stop",e=>this.g_bir(e)],["stop-all",()=>this.g_bmH()],["set-paused",e=>this.g_bmI(e)],["set-volume",e=>this.g_bmJ(e)],["fade-volume",e=>this.g_bmK(e)],["set-master-volume",e=>this.g_bmL(e)],["set-muted",e=>this.g_bmM(e)],["set-silent",e=>this.g_bmN(e)],["set-looping",e=>this.g_bmO(e)],["set-playback-rate",e=>this.g_bmP(e)],["seek",e=>this.g_bmQ(e)],["preload",e=>this.g_bmR(e)],["unload",e=>this.g_aqb(e)],["unload-all",()=>this.g_bmS()],["set-suspended",e=>this.g_bmT(e)],["add-effect",e=>this.g_bmU(e)],["set-effect-param",e=>this.g_bmV(e)],["remove-effects",e=>this.g_bmW(e)],["tick",e=>this.g_asj(e)],["load-state",e=>this.g_bmX(e)]])}async g_bmF(e){e.isWKWebView&&(this.g_bmu=!0),this.g_bd_=e.timeScaleMode,this.g_beb=["equalpower","HRTF","soundfield"][e.panningModel],this.g_bec=["linear","inverse","exponential"][e.distanceModel],this.g_bmt=e.refDistance,this.g_beh=e.maxDistance,this.g_bei=e.rolloffFactor;const g={latencyHint:e.latencyHint};if("undefined"!=typeof AudioContext)this.g_bmi=new AudioContext(g);else if("undefined"!=typeof webkitAudioContext)this.g_bmi=new webkitAudioContext(g);else throw new Error("Web Audio API not supported");this.g_bmj=this.g_bmi.createGain(),this.g_bmj.connect(this.g_bmi.destination);const n=e.listenerPos;this.g_bmi.listener.setPosition(n[0],n[1],n[2]),this.g_bmi.listener.setOrientation(0,0,1,0,-1,0),window.addEventListener("pointerup",this.g_bml,!0),window.addEventListener("touchend",this.g_bml,!0),window.addEventListener("click",this.g_bml,!0),window.addEventListener("keydown",this.g_bml,!0),self.C3_GetAudioContextCurrentTime=()=>this.g_bmY();try{await Promise.all(e.preloadList.map(e=>this.g_bmZ(e.originalUrl,e.url,e.type,!1)))}catch(e){console.error("[Construct 3] Preloading sounds failed: ",e)}return{sampleRate:this.g_bmi.sampleRate}}g_bmm(){if(!this.g_bmk){const e=this.g_bmi;"suspended"===e.state&&e.resume&&e.resume();const g=e.createBuffer(1,220,22050),n=e.createBufferSource();n.buffer=g,n.connect(e.destination),n.start(0),"running"===e.state&&(this.g_bmk=!0,window.removeEventListener("pointerup",this.g_bml,!0),window.removeEventListener("touchend",this.g_bml,!0),window.removeEventListener("click",this.g_bml,!0),window.removeEventListener("keydown",this.g_bml,!0),this.g_bml=null)}}g_bm_(){return this.g_bmi}g_bmY(){return this.g_bmi.currentTime}g_bm$(){return this.g_bmj}g_bna(e){const g=this.g_bmx.get(e.toLowerCase());return g?g[0].g_bnb():this.g_bm$()}g_bnc(e,g){e=e.toLowerCase();let n=this.g_bmx.get(e);n||(n=[],this.g_bmx.set(e,n)),g.g_aTm(n.length),g.g_bnd(e),n.push(g),this.g_bne(e)}g_bne(e){let g=this.g_bm$();const n=this.g_bmx.get(e);if(n&&n.length){g=n[0].g_bnb();for(let e=0,g=n.length;e<g;++e){const _=n[e];e+1===g?_.g_bnf(this.g_bm$()):_.g_bnf(n[e+1].g_bnb())}}for(const n of this.g_bng(e))n.g_bnh(g);this.g_bmB&&this.g_bmA===e&&(this.g_bmB.disconnect(),this.g_bmB.connect(g))}g_bni(){return this.g_bel}g_Ei(){return this.g_bem}g_bnj(){return this.g_bd_}g_ata(){return this.g_aRI}g_aoQ(){return this.g_aXL}g_bnk(){return this.g_bmu}g_bnl(){return this.g_bmw}g_bnm(){this.g_bmv=!0}g_bnn(){return this.g_beb}g_bno(){return this.g_bec}g_bnp(){return this.g_bmt}g_bnq(){return this.g_beh}g_bnr(){return this.g_bei}g_bns(e,g){return g?this.g_aYq.g_aNU(e).then(e=>{const g=this.g_bmi.createBuffer(1,e.length,48e3),n=g.getChannelData(0);return n.set(e),g}):new Promise((g,n)=>{this.g_bmi.decodeAudioData(e,g,n)})}g_blo(e){this.g_aYq.g_blo(e)}g_blp(e){this.g_aYq.g_blp(e)}g_bnt(g){let n=0;for(let _=0,e=this.g_bmo.length;_<e;++_){const t=this.g_bmo[_];this.g_bmo[n]=t,t.g_bnu()===g?t.g_RM():++n}this.g_bmo.length=n}g_bnv(){let e=0;for(let g=0,n=this.g_bmn.length;g<n;++g){const n=this.g_bmn[g];this.g_bmn[e]=n,n.g_bnw()?n.g_RM():++e}this.g_bmn.length=e}*g_bng(g){if(g)for(const n of this.g_bmo)e(n.g_bnx(),g)&&(yield n);else this.g_bmp&&!this.g_bmp.g_bny()&&(yield this.g_bmp)}async g_bmZ(g,n,_,t,b){for(const e of this.g_bmn)if(e.g_bnz()===n)return await e.g_KU(),e;if(b)return null;t&&(this.g_bmu||this.g_bmv)&&this.g_bnv();const e=g_bnA.g_aam(this,g,n,_,t);return this.g_bmn.push(e),await e.g_KU(),e}async g_bnB(n,_,t,b,o){for(const e of this.g_bmo)if(e.g_bnz()===_&&(e.g_bnC()||o))return e.g_bnD(b),e;const e=await this.g_bmZ(n,_,t,o),a=e.g_aOg(b);return this.g_bmo.push(a),a}g_bnE(e){let g=this.g_bms.get(e);if(!g){let n=null;const _=new Promise(e=>n=e);g={g_bnF:0,promise:_,resolve:n},this.g_bms.set(e,g)}g.g_bnF++}g_bnG(e){const g=this.g_bms.get(e);if(!g)throw new Error("expected pending tag");g.g_bnF--,0===g.g_bnF&&(g.resolve(),this.g_bms.delete(e))}g_bnH(e){e||(e=this.g_bmq);const g=this.g_bms.get(e);return g?g.promise:Promise.resolve()}g_bnI(){if(0<this.g_bmy.size)return void this.g_aMf();for(const e of this.g_bmo)if(e.g_Lb())return void this.g_aMf()}g_atc(){for(const e of this.g_bmy)e.g_atc();const e=this.g_bmY();for(const g of this.g_bmo)g.g_atc(e);const g=this.g_bmo.filter(e=>e.g_Lb()).map(e=>e.g_bnJ());this.g_bjN("state",{tickCount:this.g_bmr,audioInstances:g,analysers:[...this.g_bmy].map(e=>e.g_bnK())}),0===g.length&&0===this.g_bmy.size&&this.g_aLS()}g_bnL(e,g){this.g_bjN("trigger",{type:e,tag:g})}async g_bmG(n){const _=n.originalUrl,t=n.url,b=n.type,o=n.isMusic,e=n.tag,a=n.isLooping,g=n.vol,r=n.pos,i=n.panning;let p=n.off;if(0<p&&!n.trueClock)if(this.g_bmi.getOutputTimestamp){const e=this.g_bmi.getOutputTimestamp();p=p-e.performanceTime/1e3+e.contextTime}else p=p-performance.now()/1e3+this.g_bmi.currentTime;this.g_bmq=e,this.g_bnE(e);try{this.g_bmp=await this.g_bnB(_,t,b,e,o),i?(this.g_bmp.g_bnM(!0),this.g_bmp.g_bnN(i.x,i.y,i.angle,i.innerAngle,i.outerAngle,i.outerGain),i.hasOwnProperty("uid")&&this.g_bmp.g_bnO(i.uid)):this.g_bmp.g_bnM(!1),this.g_bmp.g_El(a,g,r,p)}catch(e){return void console.error("[Construct 3] Audio: error starting playback: ",e)}finally{this.g_bnG(e)}this.g_aMf()}g_bir(e){const g=e.tag;for(const n of this.g_bng(g))n.g_Ex()}g_bmH(){for(const e of this.g_bmo)e.g_Ex()}g_bmI(e){const g=e.tag,n=e.paused;for(const _ of this.g_bng(g))n?_.g_bnP():_.g_auJ();this.g_bnI()}g_bmJ(e){const g=e.tag,n=e.vol;for(const _ of this.g_bng(g))_.g_Et(n)}async g_bmK(g){const n=g.tag,_=g.vol,t=g.duration,b=g.stopOnEnd;await this.g_bnH(n);for(const e of this.g_bng(n))e.g_beN(_,t,b);this.g_bnI()}g_bmL(e){this.g_bel=e.vol;for(const g of this.g_bmo)g.g_bnQ()}g_bmM(e){const g=e.tag,n=e.isMuted;for(const _ of this.g_bng(g))_.g_Es(n)}g_bmN(e){this.g_bem=e.isSilent,this.g_aYq.g_EB(this.g_bem);for(const g of this.g_bmo)g.g_bnR()}g_bmO(e){const g=e.tag,n=e.isLooping;for(const _ of this.g_bng(g))_.g_Er(n)}g_bmP(e){const g=e.tag,n=e.rate;for(const _ of this.g_bng(g))_.g_Ew(n)}g_bmQ(e){const g=e.tag,n=e.pos;for(const _ of this.g_bng(g))_.g_EA(n)}async g_bmR(g){const n=g.originalUrl,_=g.url,t=g.type,b=g.isMusic;try{await this.g_bnB(n,_,t,"",b)}catch(e){console.error("[Construct 3] Audio: error preloading: ",e)}}async g_aqb(g){const n=g.url,_=g.type,t=g.isMusic,b=await this.g_bmZ("",n,_,t,!0);if(b){b.g_RM();const e=this.g_bmn.indexOf(b);-1!==e&&this.g_bmn.splice(e,1)}}g_bmS(){for(const e of this.g_bmn)e.g_RM();this.g_bmn.length=0}g_bmT(e){const g=e.isSuspended;!g&&this.g_bmi.resume&&this.g_bmi.resume();for(const n of this.g_bmo)n.g_aZb(g);g&&this.g_bmi.suspend&&this.g_bmi.suspend()}g_asj(e){if(this.g_aRI=e.timeScale,this.g_aXL=e.gameTime,this.g_bmr=e.tickCount,0!==this.g_bd_)for(const e of this.g_bmo)e.g_bnS();const g=e.listenerPos;g&&this.g_bmi.listener.setPosition(g[0],g[1],g[2]);for(const g of e.instPans){const e=g.uid;for(const n of this.g_bmo)n.g_amU()===e&&n.g_bnT(g.x,g.y,g.angle)}}async g_bmU(g){const n=g.type,_=g.tag,t=g.params;let o;if("filter"===n)o=new g_bnU(this,...t);else if("delay"===n)o=new g_bnV(this,...t);else if("convolution"===n){let e=null;try{e=await this.g_bmZ(g.bufferOriginalUrl,g.bufferUrl,g.bufferType,!1)}catch(e){return void console.log("[Construct 3] Audio: error loading convolution: ",e)}o=new g_bnW(this,e.g_bnX(),...t),o.g_bnY(g.bufferOriginalUrl,g.bufferUrl,g.bufferType)}else if("flanger"===n)o=new g_bnZ(this,...t);else if("phaser"===n)o=new g_bn_(this,...t);else if("gain"===n)o=new g_bn$(this,...t);else if("tremolo"===n)o=new g_boa(this,...t);else if("ringmod"===n)o=new g_bob(this,...t);else if("distortion"===n)o=new g_boc(this,...t);else if("compressor"===n)o=new g_bod(this,...t);else if("analyser"===n)o=new g_boe(this,...t);else throw new Error("invalid effect type");this.g_bnc(_,o),this.g_bof()}g_bmV(n){const _=n.tag,t=n.index,b=n.param,o=n.value,e=n.ramp,a=n.time,g=this.g_bmx.get(_);!g||0>t||t>=g.length||(g[t].g_bog(b,o,e,a),this.g_bof())}g_bmW(e){const g=e.tag.toLowerCase(),n=this.g_bmx.get(g);if(n&&n.length){for(const e of n)e.g_RM();this.g_bmx.delete(g),this.g_bne(g)}}g_boh(e){this.g_bmy.add(e),this.g_bnI()}g_boi(e){this.g_bmy.delete(e)}g_bof(){this.g_bmz||(this.g_bmz=!0,Promise.resolve().then(()=>this.g_boj()))}g_boj(){const e={};for(const[g,n]of this.g_bmx)e[g]=n.map(e=>e.g_bnJ());this.g_bjN("fxstate",{fxstate:e}),this.g_bmz=!1}async g_bmX(e){const g=e.saveLoadMode;if(3!==g)for(const e of this.g_bmo)e.g_bnw()&&1===g||!e.g_bnw()&&2===g||e.g_Ex();for(const g of this.g_bmx.values())for(const e of g)e.g_RM();this.g_bmx.clear(),this.g_aRI=e.timeScale,this.g_aXL=e.gameTime;const n=e.listenerPos;this.g_bmi.listener.setPosition(n[0],n[1],n[2]),this.g_bem=e.isSilent,this.g_aYq.g_EB(this.g_bem),this.g_bel=e.masterVolume;const _=[];for(const g of Object.values(e.effects))_.push(Promise.all(g.map(e=>this.g_bmU(e))));await Promise.all(_),await Promise.all(e.playing.map(e=>this.g_bok(e,g))),this.g_bnI()}async g_bok(n,_){if(3===_)return;const t=n.bufferOriginalUrl,b=n.bufferUrl,o=n.bufferType,e=n.isMusic,a=n.tag,g=n.isLooping,r=n.volume,i=n.playbackTime;if(e&&1===_)return;if(!e&&2===_)return;let p=null;try{p=await this.g_bnB(t,b,o,a,e)}catch(e){return void console.error("[Construct 3] Audio: error loading audio state: ",e)}p.g_bol(n.pan),p.g_El(g,r,i,0),n.isPlaying||p.g_bnP(),p.g_bom(n)}g_bmC(e,g){this.g_bmB&&this.g_bmB.disconnect(),this.g_bmA=g.toLowerCase(),this.g_bmB=this.g_bmi.createMediaStreamSource(e),this.g_bmB.connect(this.g_bna(this.g_bmA))}g_bmE(){return this.g_bmD||(this.g_bmD=this.g_bmi.createMediaStreamDestination(),this.g_bmj.connect(this.g_bmD)),this.g_bmD.stream}};g_bkq.g_bll(g)}"use strict",self.g_bnA=class{constructor(g,n,_,t,b){this.g_bon=g,this.g_boo=n,this.g_alt=_,this.g_Xh=t,this.g_bop=b,this.g_boq="",this.g_bor="not-loaded",this.g_aly=null}g_RM(){this.g_bor="not-loaded",this.g_bon=null,this.g_aly=null}static g_aam(g,n,_,t,b){const e="audio/webm; codecs=opus"===t&&!g.g_bnl();return b&&e&&g.g_bnm(),!b||g.g_bnk()||e?new g_bos(g,n,_,t,b,e):new g_bot(g,n,_,t,b)}g_aOg(e){return"html5"===this.g_boq?new g_bou(this.g_bon,this,e):new g_bov(this.g_bon,this,e)}g_apX(){}g_KU(){return this.g_aly||(this.g_aly=this.g_apX()),this.g_aly}g_alz(){}g_bow(){}g_box(){return"failed"===this.g_bor}g_bm_(){return this.g_bon.g_bm_()}g_boy(){return this.g_boq}g_boz(){return this.g_boo}g_bnz(){return this.g_alt}g_boA(){return this.g_Xh}g_bnw(){return this.g_bop}g_aPJ(){}},"use strict",self.g_bot=class extends g_bnA{constructor(g,n,_,t,b){super(g,n,_,t,b),this.g_boq="html5",this.g_boB=new Audio,this.g_boB.crossOrigin="anonymous",this.g_boB.autoplay=!1,this.g_boB.preload="auto",this.g_boC=null,this.g_boD=null,this.g_boE=!1,this.g_boB.addEventListener("canplaythrough",()=>this.g_boE=!0),this.g_boF=this.g_bm_().createGain(),this.g_boG=null,this.g_boB.addEventListener("canplay",()=>{this.g_boC&&(this.g_bor="loaded",this.g_boC(),this.g_boC=null,this.g_boD=null),this.g_boG||!this.g_boB||(this.g_boG=this.g_bm_().createMediaElementSource(this.g_boB),this.g_boG.connect(this.g_boF))}),this.onended=null,this.g_boB.addEventListener("ended",()=>{this.onended&&this.onended()}),this.g_boB.addEventListener("error",e=>this.g_bbz(e))}g_RM(){this.g_bon.g_bnt(this),this.g_boF.disconnect(),this.g_boF=null,this.g_boG.disconnect(),this.g_boG=null,this.g_boB&&!this.g_boB.paused&&this.g_boB.pause(),this.onended=null,this.g_boB=null,super.g_RM()}g_apX(){return this.g_bor="loading",new Promise((e,g)=>{this.g_boC=e,this.g_boD=g,this.g_boB.src=this.g_alt})}g_bbz(e){console.error(`[Construct 3] Audio '${this.g_alt}' error: `,e),this.g_boD&&(this.g_bor="failed",this.g_boD(e),this.g_boC=null,this.g_boD=null)}g_alz(){const e=4<=this.g_boB.readyState;return e&&(this.g_boE=!0),e||this.g_boE}g_bow(){return this.g_alz()}g_boH(){return this.g_boB}g_boI(){return this.g_boF}g_aPJ(){return this.g_boB.duration}},"use strict",self.g_bos=class extends g_bnA{constructor(g,n,_,t,b,e){super(g,n,_,t,b),this.g_boq="webaudio",this.g_boJ=null,this.g_boK=null,this.g_boL=!!e}g_RM(){this.g_bon.g_bnt(this),this.g_boJ=null,this.g_boK=null,super.g_RM()}async g_boM(){if(this.g_boJ)return this.g_boJ;const e=this.g_bon.g_bjX();if("cordova"===e.g_aZN()&&e.g_SV(this.g_alt))this.g_boJ=await e.g_akK(this.g_alt);else{const e=await fetch(this.g_alt);if(!e.ok)throw new Error(`error fetching audio data: ${e.status} ${e.statusText}`);this.g_boJ=await e.arrayBuffer()}}async g_boN(){return this.g_boK?this.g_boK:void(this.g_boK=await this.g_bon.g_bns(this.g_boJ,this.g_boL),this.g_boJ=null)}async g_apX(){try{this.g_bor="loading",await this.g_boM(),await this.g_boN(),this.g_bor="loaded"}catch(e){this.g_bor="failed",console.error(`[Construct 3] Failed to load audio '${this.g_alt}': `,e)}}g_alz(){return!!(this.g_boJ||this.g_boK)}g_bow(){return!!this.g_boK}g_bnX(){return this.g_boK}g_aPJ(){return this.g_boK?this.g_boK.duration:0}},"use strict";{function n(g){return g*e}const e=180/Math.PI;self.g_boO=class{constructor(e,g,n){this.g_bon=e,this.g_afG=g,this.g_boP=n,this.g_boQ=this.g_bm_().createGain(),this.g_boQ.connect(this.g_bm$()),this.g_boR=null,this.g_boS=!1,this.g_aCh=!0,this.g_boT=!1,this.g_boU=!1,this.g_aJh=!1,this.g_boV=1,this.g_boW=!1,this.g_atp=1;const _=this.g_bon.g_bnj();this.g_boX=1===_&&!this.g_bnw()||2===_,this.g_boY=-1,this.g_boZ=-1,this.g_bo_=!1}g_RM(){this.g_bon=null,this.g_afG=null,this.g_boR&&(this.g_boR.disconnect(),this.g_boR=null),this.g_boQ.disconnect(),this.g_boQ=null}g_bm_(){return this.g_bon.g_bm_()}g_bm$(){return this.g_bon.g_bna(this.g_boP)}g_bni(){return this.g_bon.g_bni()}g_bo$(){return this.g_boX?this.g_bon.g_aoQ():performance.now()/1e3}g_boz(){return this.g_afG.g_boz()}g_bnz(){return this.g_afG.g_bnz()}g_boA(){return this.g_afG.g_boA()}g_bnu(){return this.g_afG}g_bnw(){return this.g_afG.g_bnw()}g_bnD(e){this.g_boP=e}g_bnx(){return this.g_boP}g_bny(){}g_bnC(){}g_at$(){return!this.g_aCh&&!this.g_boT&&!this.g_bny()}g_Lb(){return!this.g_aCh&&!this.g_bny()}g_bpa(){}g_aPJ(e){let g=this.g_afG.g_aPJ();return e&&(g/=this.g_atp||.001),g}g_El(){}g_Ex(){}g_bnP(){}g_bpb(){return this.g_boT}g_auJ(){}g_Et(e){this.g_boV=e,this.g_boQ.gain.cancelScheduledValues(0),this.g_boZ=-1,this.g_boQ.gain.value=this.g_bpc()}g_beN(g,n,_){if(!this.g_bpd()){g*=this.g_bni();const t=this.g_boQ.gain;t.cancelScheduledValues(0);const b=this.g_bon.g_bmY(),e=b+n;t.setValueAtTime(this.g_bpc(),b),t.linearRampToValueAtTime(g,e),this.g_boV=g,this.g_boZ=e,this.g_bo_=_}}g_bnQ(){this.g_Et(this.g_boV)}g_atc(e){-1!==this.g_boZ&&e>=this.g_boZ&&(this.g_boZ=-1,this.g_bo_&&this.g_Ex(),this.g_bon.g_bnL("fade-ended",this.g_boP))}g_bpc(){const e=this.g_boV*this.g_bni();return isFinite(e)?e:0}g_Es(e){e=!!e,this.g_boW===e||(this.g_boW=e,this.g_bnR())}g_bpd(){return this.g_boW}g_Ei(){return this.g_bon.g_Ei()}g_bnR(){}g_Er(){}g_aG_(){return this.g_aJh}g_Ew(e){this.g_atp===e||(this.g_atp=e,this.g_bnS())}g_bnS(){}g_atZ(){return this.g_atp}g_EA(){}g_aZb(){}g_bnM(e){e=!!e,this.g_boS===e||(this.g_boS=e,this.g_boS?(!this.g_boR&&(this.g_boR=this.g_bm_().createPanner(),this.g_boR.panningModel=this.g_bon.g_bnn(),this.g_boR.distanceModel=this.g_bon.g_bno(),this.g_boR.refDistance=this.g_bon.g_bnp(),this.g_boR.maxDistance=this.g_bon.g_bnq(),this.g_boR.rolloffFactor=this.g_bon.g_bnr()),this.g_boQ.disconnect(),this.g_boQ.connect(this.g_boR),this.g_boR.connect(this.g_bm$())):(this.g_boR.disconnect(),this.g_boQ.disconnect(),this.g_boQ.connect(this.g_bm$())))}g_bnN(_,t,b,o,e,a){this.g_boS&&(this.g_bnT(_,t,b),this.g_boR.coneInnerAngle=n(o),this.g_boR.coneOuterAngle=n(e),this.g_boR.coneOuterGain=a)}g_bnT(e,g,n){this.g_boS&&(this.g_boR.setPosition(e,g,0),this.g_boR.setOrientation(Math.cos(n),Math.sin(n),0))}g_bnO(e){this.g_boY=e}g_amU(){return this.g_boY}g_bpe(){}g_bnh(e){const g=this.g_boR||this.g_boQ;g.disconnect(),g.connect(e)}g_bnJ(){return{tag:this.g_boP,duration:this.g_aPJ(),volume:this.g_boV,isPlaying:this.g_at$(),playbackTime:this.g_bpa(),playbackRate:this.g_atZ(),uid:this.g_boY,bufferOriginalUrl:this.g_boz(),bufferUrl:"",bufferType:this.g_boA(),isMusic:this.g_bnw(),isLooping:this.g_aG_(),isMuted:this.g_bpd(),resumePosition:this.g_bpe(),pan:this.g_bpf()}}g_bom(e){this.g_Ew(e.playbackRate),this.g_Es(e.isMuted)}g_bpf(){if(!this.g_boR)return null;const e=this.g_boR;return{pos:[e.positionX.value,e.positionY.value,e.positionZ.value],orient:[e.orientationX.value,e.orientationY.value,e.orientationZ.value],cia:e.coneInnerAngle,coa:e.coneOuterAngle,cog:e.coneOuterGain,uid:this.g_boY}}g_bol(e){if(!e)return void this.g_bnM(!1);this.g_bnM(!0);const g=this.g_boR;g.setPosition(...g.pos),g.setOrientation(...g.orient),g.coneInnerAngle=g.cia,g.coneOuterAngle=g.coa,g.coneOuterGain=g.cog,this.g_boY=g.uid}}}"use strict",self.g_bou=class extends g_boO{constructor(e,g,n){super(e,g,n),this.g_afG.g_boI().connect(this.g_boQ),this.g_afG.onended=()=>this.g_bpg()}g_RM(){this.g_Ex(),this.g_afG.g_boI().disconnect(),super.g_RM()}g_boH(){return this.g_afG.g_boH()}g_bpg(){this.g_aCh=!0,this.g_boY=-1,this.g_bon.g_bnL("ended",this.g_boP)}g_bny(){return this.g_boH().ended}g_bnC(){return!!this.g_aCh||this.g_bny()}g_bpa(e){let g=this.g_boH().currentTime;return e&&(g*=this.g_atp),this.g_aJh||(g=Math.min(g,this.g_aPJ())),g}g_El(e,g,n){const _=this.g_boH();if(1!==_.playbackRate&&(_.playbackRate=1),_.loop!==e&&(_.loop=e),this.g_Et(g),_.muted&&(_.muted=!1),_.currentTime!==n)try{_.currentTime=n}catch(e){console.warn(`[Construct 3] Exception seeking audio '${this.g_afG.g_bnz()}' to position '${n}': `,e)}this.g_bon.g_blo(_),this.g_aCh=!1,this.g_boT=!1,this.g_aJh=e,this.g_atp=1}g_Ex(){const e=this.g_boH();e.paused||e.pause(),this.g_bon.g_blp(e),this.g_aCh=!0,this.g_boT=!1,this.g_boY=-1}g_bnP(){if(!(this.g_boT||this.g_aCh||this.g_bny())){const e=this.g_boH();e.paused||e.pause(),this.g_bon.g_blp(e),this.g_boT=!0}}g_auJ(){!this.g_boT||this.g_aCh||this.g_bny()||(this.g_bon.g_blo(this.g_boH()),this.g_boT=!1)}g_bnR(){this.g_boH().muted=this.g_boW||this.g_Ei()}g_Er(e){e=!!e,this.g_aJh===e||(this.g_aJh=e,this.g_boH().loop=e)}g_bnS(){let e=this.g_atp;this.g_boX&&(e*=this.g_bon.g_ata());try{this.g_boH().playbackRate=e}catch(g){console.warn(`[Construct 3] Unable to set playback rate '${e}':`,g)}}g_EA(e){if(!(this.g_aCh||this.g_bny()))try{this.g_boH().currentTime=e}catch(g){console.warn(`[Construct 3] Error seeking audio to '${e}': `,g)}}g_bpe(){return this.g_bpa()}g_aZb(e){e?this.g_at$()?(this.g_boH().pause(),this.g_boU=!0):this.g_boU=!1:this.g_boU&&(this.g_bon.g_blo(this.g_boH()),this.g_boU=!1)}},"use strict",self.g_bov=class extends g_boO{constructor(e,g,n){super(e,g,n),this.g_bph=null,this.g_bpi=e=>this.g_bpg(e),this.g_bpj=!0,this.g_bpk=null,this.g_aXG=0,this.g_bpl=0,this.g_bpm=1}g_RM(){this.g_Ex(),this.g_bpn(),this.g_bpi=null,super.g_RM()}g_bpn(){this.g_bph&&this.g_bph.disconnect(),this.g_bph=null,this.g_bpk=null}g_bpg(e){this.g_boT||this.g_boU||e.target!==this.g_bpk||(this.g_bpj=!0,this.g_aCh=!0,this.g_boY=-1,this.g_bpn(),this.g_bon.g_bnL("ended",this.g_boP))}g_bny(){return!(!this.g_aCh&&this.g_bph&&this.g_bph.loop)&&!this.g_boT&&this.g_bpj}g_bnC(){return!this.g_bph||this.g_aCh||this.g_bny()}g_bpa(e){let g=0;return g=this.g_boT?this.g_bpl:this.g_bo$()-this.g_aXG,e&&(g*=this.g_atp),this.g_aJh||(g=Math.min(g,this.g_aPJ())),g}g_El(e,g,n,_){this.g_bpm=1,this.g_Et(g),this.g_bpn(),this.g_bph=this.g_bm_().createBufferSource(),this.g_bph.buffer=this.g_afG.g_bnX(),this.g_bph.connect(this.g_boQ),this.g_bpk=this.g_bph,this.g_bph.onended=this.g_bpi,this.g_bph.loop=e,this.g_bph.start(_,n),this.g_bpj=!1,this.g_aCh=!1,this.g_boT=!1,this.g_aJh=e,this.g_atp=1,this.g_aXG=this.g_bo$()-n}g_Ex(){this.g_bph&&this.g_bph.stop(0),this.g_aCh=!0,this.g_boT=!1,this.g_boY=-1}g_bnP(){this.g_boT||this.g_aCh||this.g_bny()||(this.g_bpl=this.g_bpa(!0),this.g_aJh&&(this.g_bpl%=this.g_aPJ()),this.g_boT=!0,this.g_bph.stop(0))}g_auJ(){!this.g_boT||this.g_aCh||this.g_bny()||(this.g_bpn(),this.g_bph=this.g_bm_().createBufferSource(),this.g_bph.buffer=this.g_afG.g_bnX(),this.g_bph.connect(this.g_boQ),this.g_bpk=this.g_bph,this.g_bph.onended=this.g_bpi,this.g_bph.loop=this.g_aJh,this.g_bnQ(),this.g_bnS(),this.g_aXG=this.g_bo$()-this.g_bpl/(this.g_atp||.001),this.g_bph.start(0,this.g_bpl),this.g_boT=!1)}g_bpc(){return super.g_bpc()*this.g_bpm}g_bnR(){this.g_bpm=this.g_boW||this.g_Ei()?0:1,this.g_bnQ()}g_Er(e){e=!!e,this.g_aJh===e||(this.g_aJh=e,this.g_bph&&(this.g_bph.loop=e))}g_bnS(){let e=this.g_atp;this.g_boX&&(e*=this.g_bon.g_ata()),this.g_bph&&(this.g_bph.playbackRate.value=e)}g_EA(e){this.g_aCh||this.g_bny()||(this.g_boT?this.g_bpl=e:(this.g_bnP(),this.g_bpl=e,this.g_auJ()))}g_bpe(){return this.g_bpl}g_aZb(e){e?this.g_at$()?(this.g_boU=!0,this.g_bpl=this.g_bpa(!0),this.g_aJh&&(this.g_bpl%=this.g_aPJ()),this.g_bph.stop(0)):this.g_boU=!1:this.g_boU&&(this.g_bpn(),this.g_bph=this.g_bm_().createBufferSource(),this.g_bph.buffer=this.g_afG.g_bnX(),this.g_bph.connect(this.g_boQ),this.g_bpk=this.g_bph,this.g_bph.onended=this.g_bpi,this.g_bph.loop=this.g_aJh,this.g_bnQ(),this.g_bnS(),this.g_aXG=this.g_bo$()-this.g_bpl/(this.g_atp||.001),this.g_bph.start(0,this.g_bpl),this.g_boU=!1)}g_bom(e){super.g_bom(e),this.g_bpl=e.resumePosition}},"use strict";{function g(e){return Math.pow(10,e/20)}function n(e){return Math.max(Math.min(g(e),1),0)}function _(e){return 20*(Math.log(e)/2.302585092994046)}function t(e){return _(Math.max(Math.min(e,1),0))}function o(e,g){return 1-Math.exp(-g*e)}class e{constructor(e){this.g_bon=e,this.g_bmi=e.g_bm_(),this.g_amb=-1,this.g_boP="",this.g_Xh="",this.g_bpo=null}g_RM(){this.g_bmi=null}g_aTm(e){this.g_amb=e}g_anu(){return this.g_amb}g_bnd(e){this.g_boP=e}g_bnx(){return this.g_boP}g_bpp(){return this.g_bmi.createGain()}g_bnb(){}g_bnf(){}g_bpq(g,n,_,t){if(g.cancelScheduledValues(0),0===t)return void(g.value=n);const b=this.g_bmi.currentTime;t+=b,0===_?g.setValueAtTime(n,t):1===_?(g.setValueAtTime(g.value,b),g.linearRampToValueAtTime(n,t)):2===_?(g.setValueAtTime(g.value,b),g.exponentialRampToValueAtTime(n,t)):void 0}g_bnJ(){return{type:this.g_Xh,tag:this.g_boP,params:this.g_bpo}}}self.g_bnU=class extends e{constructor(n,_,t,b,o,e,a){super(n),this.g_Xh="filter",this.g_bpo=[_,t,b,o,e,a],this.g_bpr=this.g_bpp(),this.g_bps=this.g_bpp(),this.g_bps.gain.value=a,this.g_bpt=this.g_bpp(),this.g_bpt.gain.value=1-a,this.g_bpu=this.g_bmi.createBiquadFilter(),this.g_bpu.type=_,this.g_bpu.frequency.value=t,this.g_bpu.detune.value=b,this.g_bpu.Q.value=o,this.g_bpu.gain.vlaue=e,this.g_bpr.connect(this.g_bpu),this.g_bpr.connect(this.g_bpt),this.g_bpu.connect(this.g_bps)}g_RM(){this.g_bpr.disconnect(),this.g_bpu.disconnect(),this.g_bps.disconnect(),this.g_bpt.disconnect(),super.g_RM()}g_bnf(e){this.g_bps.disconnect(),this.g_bps.connect(e),this.g_bpt.disconnect(),this.g_bpt.connect(e)}g_bnb(){return this.g_bpr}g_bog(e,g,n,_){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpo[5]=g,this.g_bpq(this.g_bps.gain,g,n,_),this.g_bpq(this.g_bpt.gain,1-g,n,_)):1===e?(this.g_bpo[1]=g,this.g_bpq(this.g_bpu.frequency,g,n,_)):2===e?(this.g_bpo[2]=g,this.g_bpq(this.g_bpu.detune,g,n,_)):3===e?(this.g_bpo[3]=g,this.g_bpq(this.g_bpu.Q,g,n,_)):4===e?(this.g_bpo[4]=g,this.g_bpq(this.g_bpu.gain,g,n,_)):void 0}},self.g_bnV=class extends e{constructor(e,g,n,_){super(e),this.g_Xh="delay",this.g_bpo=[g,n,_],this.g_bpr=this.g_bpp(),this.g_bps=this.g_bpp(),this.g_bps.gain.value=_,this.g_bpt=this.g_bpp(),this.g_bpt.gain.value=1-_,this.g_bpv=this.g_bpp(),this.g_bpw=this.g_bmi.createDelay(g),this.g_bpw.delayTime.value=g,this.g_bpx=this.g_bpp(),this.g_bpx.gain.value=n,this.g_bpr.connect(this.g_bpv),this.g_bpr.connect(this.g_bpt),this.g_bpv.connect(this.g_bps),this.g_bpv.connect(this.g_bpw),this.g_bpw.connect(this.g_bpx),this.g_bpx.connect(this.g_bpv)}g_RM(){this.g_bpr.disconnect(),this.g_bps.disconnect(),this.g_bpt.disconnect(),this.g_bpv.disconnect(),this.g_bpw.disconnect(),this.g_bpx.disconnect(),super.g_RM()}g_bnf(e){this.g_bps.disconnect(),this.g_bps.connect(e),this.g_bpt.disconnect(),this.g_bpt.connect(e)}g_bnb(){return this.g_bpr}g_bog(g,_,t,b){0===g?(_=Math.max(Math.min(_/100,1),0),this.g_bpo[2]=_,this.g_bpq(this.g_bps.gain,_,t,b),this.g_bpq(this.g_bpt.gain,1-_,t,b)):4===g?(this.g_bpo[1]=n(_),this.g_bpq(this.g_bpx.gain,n(_),t,b)):5===g?(this.g_bpo[0]=_,this.g_bpq(this.g_bpw.delayTime,_,t,b)):void 0}},self.g_bnW=class extends e{constructor(e,g,n,_){super(e),this.g_Xh="convolution",this.g_bpo=[n,_],this.g_bpy="",this.g_bpz="",this.g_bpA="",this.g_bpr=this.g_bpp(),this.g_bps=this.g_bpp(),this.g_bps.gain.value=_,this.g_bpt=this.g_bpp(),this.g_bpt.gain.value=1-_,this.g_bpB=this.g_bmi.createConvolver(),this.g_bpB.normalize=n,this.g_bpB.buffer=g,this.g_bpr.connect(this.g_bpB),this.g_bpr.connect(this.g_bpt),this.g_bpB.connect(this.g_bps)}g_RM(){this.g_bpr.disconnect(),this.g_bpB.disconnect(),this.g_bps.disconnect(),this.g_bpt.disconnect(),super.g_RM()}g_bnf(e){this.g_bps.disconnect(),this.g_bps.connect(e),this.g_bpt.disconnect(),this.g_bpt.connect(e)}g_bnb(){return this.g_bpr}g_bog(e,g,n,_){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpo[1]=g,this.g_bpq(this.g_bps.gain,g,n,_),this.g_bpq(this.g_bpt.gain,1-g,n,_)):void 0}g_bnY(e,g,n){this.g_bpy=e,this.g_bpz=g,this.g_bpA=n}g_bnJ(){const e=super.g_bnJ();return e.bufferOriginalUrl=this.g_bpy,e.bufferUrl="",e.bufferType=this.g_bpA,e}},self.g_bnZ=class extends e{constructor(g,n,_,t,b,e){super(g),this.g_Xh="flanger",this.g_bpo=[n,_,t,b,e],this.g_bpr=this.g_bpp(),this.g_bpt=this.g_bpp(),this.g_bpt.gain.value=1-e/2,this.g_bps=this.g_bpp(),this.g_bps.gain.value=e/2,this.g_bpC=this.g_bpp(),this.g_bpC.gain.value=b,this.g_bpw=this.g_bmi.createDelay(n+_),this.g_bpw.delayTime.value=n,this.g_bpD=this.g_bmi.createOscillator(),this.g_bpD.frequency.value=t,this.g_bpE=this.g_bpp(),this.g_bpE.gain.value=_,this.g_bpr.connect(this.g_bpw),this.g_bpr.connect(this.g_bpt),this.g_bpw.connect(this.g_bps),this.g_bpw.connect(this.g_bpC),this.g_bpC.connect(this.g_bpw),this.g_bpD.connect(this.g_bpE),this.g_bpE.connect(this.g_bpw.delayTime),this.g_bpD.start(0)}g_RM(){this.g_bpD.stop(0),this.g_bpr.disconnect(),this.g_bpw.disconnect(),this.g_bpD.disconnect(),this.g_bpE.disconnect(),this.g_bpt.disconnect(),this.g_bps.disconnect(),this.g_bpC.disconnect(),super.g_RM()}g_bnf(e){this.g_bps.disconnect(),this.g_bps.connect(e),this.g_bpt.disconnect(),this.g_bpt.connect(e)}g_bnb(){return this.g_bpr}g_bog(e,g,n,_){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpo[4]=g,this.g_bpq(this.g_bps.gain,g/2,n,_),this.g_bpq(this.g_bpt.gain,1-g/2,n,_)):6===e?(this.g_bpo[1]=g/1e3,this.g_bpq(this.g_bpE.gain,g/1e3,n,_)):7===e?(this.g_bpo[2]=g,this.g_bpq(this.g_bpD.frequency,g,n,_)):8===e?(this.g_bpo[3]=g/100,this.g_bpq(this.g_bpC.gain,g/100,n,_)):void 0}},self.g_bn_=class extends e{constructor(n,_,t,b,o,e,a){super(n),this.g_Xh="phaser",this.g_bpo=[_,t,b,o,e,a],this.g_bpr=this.g_bpp(),this.g_bpt=this.g_bpp(),this.g_bpt.gain.value=1-a/2,this.g_bps=this.g_bpp(),this.g_bps.gain.value=a/2,this.g_bpu=this.g_bmi.createBiquadFilter(),this.g_bpu.type="allpass",this.g_bpu.frequency.value=_,this.g_bpu.detune.value=t,this.g_bpu.Q.value=b,this.g_bpD=this.g_bmi.createOscillator(),this.g_bpD.frequency.value=e,this.g_bpE=this.g_bpp(),this.g_bpE.gain.value=o,this.g_bpr.connect(this.g_bpu),this.g_bpr.connect(this.g_bpt),this.g_bpu.connect(this.g_bps),this.g_bpD.connect(this.g_bpE),this.g_bpE.connect(this.g_bpu.frequency),this.g_bpD.start(0)}g_RM(){this.g_bpD.stop(0),this.g_bpr.disconnect(),this.g_bpu.disconnect(),this.g_bpD.disconnect(),this.g_bpE.disconnect(),this.g_bpt.disconnect(),this.g_bps.disconnect(),super.g_RM()}g_bnf(e){this.g_bps.disconnect(),this.g_bps.connect(e),this.g_bpt.disconnect(),this.g_bpt.connect(e)}g_bnb(){return this.g_bpr}g_bog(e,g,n,_){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpo[5]=g,this.g_bpq(this.g_bps.gain,g/2,n,_),this.g_bpq(this.g_bpt.gain,1-g/2,n,_)):1===e?(this.g_bpo[0]=g,this.g_bpq(this.g_bpu.frequency,g,n,_)):2===e?(this.g_bpo[1]=g,this.g_bpq(this.g_bpu.detune,g,n,_)):3===e?(this.g_bpo[2]=g,this.g_bpq(this.g_bpu.Q,g,n,_)):6===e?(this.g_bpo[3]=g,this.g_bpq(this.g_bpE.gain,g,n,_)):7===e?(this.g_bpo[4]=g,this.g_bpq(this.g_bpD.frequency,g,n,_)):void 0}},self.g_bn$=class extends e{constructor(e,g){super(e),this.g_Xh="gain",this.g_bpo=[g],this.g_bpF=this.g_bpp(),this.g_bpF.gain.value=g}g_RM(){this.g_bpF.disconnect(),super.g_RM()}g_bnf(e){this.g_bpF.disconnect(),this.g_bpF.connect(e)}g_bnb(){return this.g_bpF}g_bog(g,_,t,b){4===g?(this.g_bpo[0]=n(_),this.g_bpq(this.g_bpF.gain,n(_),t,b)):void 0}},self.g_boa=class extends e{constructor(e,g,n){super(e),this.g_Xh="tremolo",this.g_bpo=[g,n],this.g_bpF=this.g_bpp(),this.g_bpF.gain.value=1-n/2,this.g_bpD=this.g_bmi.createOscillator(),this.g_bpD.frequency.value=g,this.g_bpE=this.g_bpp(),this.g_bpE.gain.value=n/2,this.g_bpD.connect(this.g_bpE),this.g_bpE.connect(this.g_bpF.gain),this.g_bpD.start(0)}g_RM(){this.g_bpD.stop(0),this.g_bpD.disconnect(),this.g_bpE.disconnect(),this.g_bpF.disconnect(),super.g_RM()}g_bnf(e){this.g_bpF.disconnect(),this.g_bpF.connect(e)}g_bnb(){return this.g_bpF}g_bog(e,g,n,_){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpo[1]=g,this.g_bpq(this.g_bpF.gain.value,1-g/2,n,_),this.g_bpq(this.g_bpE.gain.value,g/2,n,_)):7===e?(this.g_bpo[0]=g,this.g_bpq(this.g_bpD.frequency,g,n,_)):void 0}},self.g_bob=class extends e{constructor(e,g,n){super(e),this.g_Xh="ringmod",this.g_bpo=[g,n],this.g_bpr=this.g_bpp(),this.g_bps=this.g_bpp(),this.g_bps.gain.value=n,this.g_bpt=this.g_bpp(),this.g_bpt.gain.value=1-n,this.g_bpG=this.g_bpp(),this.g_bpG.gain.value=0,this.g_bpD=this.g_bmi.createOscillator(),this.g_bpD.frequency.value=g,this.g_bpD.connect(this.g_bpG.gain),this.g_bpD.start(0),this.g_bpr.connect(this.g_bpG),this.g_bpr.connect(this.g_bpt),this.g_bpG.connect(this.g_bps)}g_RM(){this.g_bpD.stop(0),this.g_bpD.disconnect(),this.g_bpG.disconnect(),this.g_bpr.disconnect(),this.g_bps.disconnect(),this.g_bpt.disconnect(),super.g_RM()}g_bnf(e){this.g_bps.disconnect(),this.g_bps.connect(e),this.g_bpt.disconnect(),this.g_bpt.connect(e)}g_bnb(){return this.g_bpr}g_bog(e,g,n,_){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpo[1]=g,this.g_bpq(this.g_bps.gain,g,n,_),this.g_bpq(this.g_bpt.gain,1-g,n,_)):7===e?(this.g_bpo[0]=g,this.g_bpq(this.g_bpD.frequency,g,n,_)):void 0}},self.g_boc=class extends e{constructor(g,n,_,t,b,e){super(g),this.g_Xh="distortion",this.g_bpo=[n,_,t,b,e],this.g_bpr=this.g_bpp(),this.g_bpH=this.g_bpp(),this.g_bpI=this.g_bpp(),this.g_bpJ(t,b),this.g_bps=this.g_bpp(),this.g_bps.gain.value=e,this.g_bpt=this.g_bpp(),this.g_bpt.gain.value=1-e,this.g_bpK=this.g_bmi.createWaveShaper(),this.g_bpL=new Float32Array(65536),this.g_bpM(n,_),this.g_bpK.curve=this.g_bpL,this.g_bpr.connect(this.g_bpH),this.g_bpr.connect(this.g_bpt),this.g_bpH.connect(this.g_bpK),this.g_bpK.connect(this.g_bpI),this.g_bpI.connect(this.g_bps)}g_RM(){this.g_bpr.disconnect(),this.g_bpH.disconnect(),this.g_bpK.disconnect(),this.g_bpI.disconnect(),this.g_bps.disconnect(),this.g_bpt.disconnect(),super.g_RM()}g_bpJ(e,g){.01>e&&(e=.01),this.g_bpH.gain.value=e,this.g_bpI.gain.value=Math.pow(1/e,.6)*g}g_bpM(e,g){for(let n,_=0;32768>_;++_)n=_/32768,n=this.g_bpN(n,e,g),this.g_bpL[32768+_]=n,this.g_bpL[32768-_-1]=-n}g_bpN(e,n,_){const t=1.05*_*n-n,b=0>e?-1:1,a=0>e?-e:e;let g=a<n?a:n+t*o(a-n,1/t);return g*=b,g}g_bnf(e){this.g_bps.disconnect(),this.g_bps.connect(e),this.g_bpt.disconnect(),this.g_bpt.connect(e)}g_bnb(){return this.g_bpr}g_bog(e,g,n,_){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpo[4]=g,this.g_bpq(this.g_bps.gain,g,n,_),this.g_bpq(this.g_bpt.gain,1-g,n,_)):void 0}},self.g_bod=class extends e{constructor(g,n,_,t,b,e){super(g),this.g_Xh="compressor",this.g_bpo=[n,_,t,b,e],this.g_bpF=this.g_bmi.createDynamicsCompressor(),this.g_bpF.threshold.value=n,this.g_bpF.knee.value=_,this.g_bpF.ratio.value=t,this.g_bpF.attack.value=b,this.g_bpF.release.value=e}g_RM(){this.g_bpF.disconnect(),super.g_RM()}g_bnf(e){this.g_bpF.disconnect(),this.g_bpF.connect(e)}g_bnb(){return this.g_bpF}g_bog(){}},self.g_boe=class extends e{constructor(e,g,n){super(e),this.g_Xh="analyser",this.g_bpo=[g,n],this.g_bpF=this.g_bmi.createAnalyser(),this.g_bpF.fftSize=g,this.g_bpF.smoothingTimeConstant=n,this.g_bpO=new Float32Array(this.g_bpF.frequencyBinCount),this.g_bpP=new Uint8Array(g),this.g_bpQ=0,this.g_bpR=0,this.g_bon.g_boh(this)}g_RM(){this.g_bon.g_boi(this),this.g_bpF.disconnect(),super.g_RM()}g_atc(){this.g_bpF.getFloatFrequencyData(this.g_bpO),this.g_bpF.getByteTimeDomainData(this.g_bpP);const e=this.g_bpF.fftSize;this.g_bpQ=0;let g=0;for(let n,_=0;_<e;++_)n=(this.g_bpP[_]-128)/128,0>n&&(n=-n),this.g_bpQ<n&&(this.g_bpQ=n),g+=n*n;this.g_bpQ=t(this.g_bpQ),this.g_bpR=t(Math.sqrt(g/e))}g_bnf(e){this.g_bpF.disconnect(),this.g_bpF.connect(e)}g_bnb(){return this.g_bpF}g_bog(){}g_bnK(){return{tag:this.g_bnx(),index:this.g_anu(),peak:this.g_bpQ,rms:this.g_bpR,binCount:this.g_bpF.frequencyBinCount,freqBins:this.g_bpO}}}}{const e=class extends g_bjJ{constructor(e){super(e,"browser"),this.g_aWz="",this.g_bjU("get-initial-state",e=>this.g_bpS(e)),this.g_bjU("ready-for-sw-messages",()=>this.g_bpT()),this.g_bjU("alert",e=>this.g_bpU(e)),this.g_bjU("close",()=>this.g_bpV()),this.g_bjU("set-focus",e=>this.g_bkg(e)),this.g_bjU("vibrate",e=>this.g_bpW(e)),this.g_bjU("lock-orientation",e=>this.g_bpX(e)),this.g_bjU("unlock-orientation",()=>this.g_bpY()),this.g_bjU("navigate",e=>this.g_bpZ(e)),this.g_bjU("request-fullscreen",e=>this.g_bp_(e)),this.g_bjU("exit-fullscreen",()=>this.g_bp$()),window.addEventListener("online",()=>this.g_beY(!0)),window.addEventListener("offline",()=>this.g_beY(!1)),document.addEventListener("backbutton",()=>this.g_bqa()),"undefined"!=typeof Windows&&Windows.UI.Core.SystemNavigationManager.getForCurrentView().addEventListener("backrequested",e=>this.g_bqb(e))}g_bpS(e){return this.g_aWz=e.exportType,{location:location.toString(),isOnline:!!navigator.onLine,referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isScirraArcade:"undefined"!=typeof window.is_scirra_arcade}}g_bpT(){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(e=>this.g_bjN("sw-message",e.data))}g_beY(e){this.g_bjN("online-state",{isOnline:e})}g_bqa(){this.g_bjN("backbutton")}g_bqb(e){e.handled=!0,this.g_bjN("backbutton")}g_bqc(){return"nwjs"===this.g_aWz?nw.Window.get():null}g_bpU(e){alert(e.message)}g_bpV(){navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():window.close()}g_bkg(e){const g=e.isFocus;if("nwjs"===this.g_aWz){const e=this.g_bqc();g?e.focus():e.blur()}else g?window.focus():window.blur()}g_bpW(e){navigator.vibrate&&navigator.vibrate(e.pattern)}g_bpX(e){const g=e.orientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(g).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let e=!1;screen.lockOrientation?e=screen.lockOrientation(g):screen.webkitLockOrientation?e=screen.webkitLockOrientation(g):screen.mozLockOrientation?e=screen.mozLockOrientation(g):screen.msLockOrientation&&(e=screen.msLockOrientation(g)),e||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",e)}}g_bpY(){try{screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(e){}}g_bpZ(e){const g=e.type;if("back"===g)navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.back();else if("forward"===g)window.forward();else if("home"===g)window.g_FM();else if("reload"===g)location.reload();else if("url"===g){const g=e.url,n=e.target,_=e.exportType;"windows-uwp"===_&&"undefined"!=typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(g)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(g,{openExternal:!0}):"cordova"===_?window.open(g,"_system"):"preview"===_?window.open(g,"_blank"):!this.g_beX&&(2===n?window.top.location=g:1===n?window.parent.location=g:window.location=g)}else if("new-window"===g){const g=e.url,n=e.tag,_=e.exportType;"windows-uwp"===_&&"undefined"!=typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(g)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(g,{openExternal:!0}):"cordova"===_?window.open(g,"_system"):window.open(g,n)}}g_bp_(e){const g={navigationUI:"auto"},n=e.navUI;1===n?g.navigationUI="hide":2===n&&(g.navigationUI="show");const _=document.documentElement;_.requestFullscreen?_.requestFullscreen(g):_.mozRequestFullScreen?_.mozRequestFullScreen(g):_.msRequestFullscreen?_.msRequestFullscreen(g):_.webkitRequestFullScreen&&("undefined"==typeof Element.ALLOW_KEYBOARD_INPUT?_.webkitRequestFullScreen():_.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT))}g_bp$(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}};g_bkq.g_bll(e)}